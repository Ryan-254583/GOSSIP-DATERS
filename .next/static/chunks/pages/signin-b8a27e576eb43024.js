(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{7752:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n(6368)}])},7315:function(e,t,n){"use strict";n.d(t,{I8:function(){return c},ZK:function(){return requestPermission},db:function(){return l},xi:function(){return listenForMessages}});var i=n(3977),r=n(9828),o=n(5876),s=n(2806);let a=(0,i.ZF)({apiKey:"AIzaSyBCVpeekEg6hJGGF-xLYPQfS2G_8bklv1Q",authDomain:"cuk-gossip.firebaseapp.com",projectId:"cuk-gossip",storageBucket:"cuk-gossip.appspot.com",messagingSenderId:"194442802549",appId:"1:194442802549:web:f2d377abb1bae3634ccf3c",measurementId:"G-ZP8JDESMH2"}),l=(0,r.ad)(a),c=(0,o.v0)(a),d=(0,s.KL)(a),requestPermission=async()=>{if(d)try{let e=await Notification.requestPermission();if("granted"===e){let e=await (0,s.LP)(d,{vapidKey:"YOUR_VAPID_KEY_HERE"});console.log("Notification permission granted, token:",e)}else console.log("Notifications denied by user")}catch(e){console.error("Error requesting notification permission:",e)}},listenForMessages=()=>{d&&(0,s.ps)(d,e=>{console.log("Message received: ",e),new Notification(e.notification.title,{body:e.notification.body,icon:"/avatars/male.png"})})}},6368:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Signin}});var i=n(5893),r=n(7294),o=n(1163),s=n(5876),a=n(7315),l=n(9828);function Signin(){let e=(0,o.useRouter)(),[t,n]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(!1),[b,m]=(0,r.useState)(!1),[S,w]=(0,r.useState)(""),handleSignin=async n=>{if(n.preventDefault(),w(""),!t||!g){w("Fill all fields.");return}y(!0);try{let n=await (0,s.e5)(a.I8,t,g),i=n.user;try{let e=await (0,l.QT)((0,l.JU)(a.db,"users",i.uid));e.exists()?localStorage.setItem("user",JSON.stringify(e.data())):localStorage.setItem("user",JSON.stringify({uid:i.uid,email:i.email}))}catch(e){console.warn("Could not fetch user doc:",e)}e.push("/dashboard")}catch(e){console.error("signin error",e),w(e.message||"Sign-in failed")}finally{y(!1)}},handleReset=async e=>{if(e.preventDefault(),w(""),!t){w("Enter your email to reset password.");return}y(!0);try{await (0,s.LS)(a.I8,t),w("Reset link sent â€” check your email."),m(!1)}catch(e){console.error("reset error",e),w(e.message||"Could not send reset email.")}finally{y(!1)}};return(0,i.jsx)("div",{style:c,children:(0,i.jsxs)("form",{onSubmit:b?handleReset:handleSignin,style:d,children:[(0,i.jsx)("h2",{style:{marginBottom:8},children:"Sign in"}),S&&(0,i.jsx)("div",{style:{color:"#ffb3b3",marginBottom:8},children:S}),(0,i.jsx)("input",{placeholder:"Email",type:"email",value:t,onChange:e=>n(e.target.value),style:u}),!b&&(0,i.jsx)("input",{placeholder:"Password",type:"password",value:g,onChange:e=>p(e.target.value),style:u}),(0,i.jsx)("button",{type:"submit",disabled:h,style:f,children:h?b?"Sending...":"Signing...":b?"Send reset link":"Sign in"}),(0,i.jsx)("div",{style:{marginTop:10,display:"flex",justifyContent:"space-between",fontSize:13},children:b?(0,i.jsx)("a",{onClick:()=>m(!1),style:{color:"#ff6666",cursor:"pointer"},children:"Back to sign in"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("a",{onClick:()=>m(!0),style:{color:"#ff6666",cursor:"pointer"},children:"Forgot password?"}),(0,i.jsx)("a",{href:"/signup",style:{color:"#ff6666"},children:"Create account"})]})})]})})}let c={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f0f10"},d={width:380,padding:22,borderRadius:12,background:"#111",color:"#fff",boxShadow:"0 8px 30px rgba(0,0,0,0.6)"},u={width:"100%",padding:"10px",marginBottom:10,borderRadius:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff"},f={width:"100%",padding:11,borderRadius:8,border:"none",background:"#b30000",color:"#fff",fontWeight:700}},1163:function(e,t,n){e.exports=n(8355)}},function(e){e.O(0,[703,281,876,998,774,888,179],function(){return e(e.s=7752)}),_N_E=e.O()}]);